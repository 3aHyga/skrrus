SPR2SCR PROC
	;IN- DS:SI - SPRTBL
	;    ES:DI - SCRTBL
	PUSH	AX
	PUSH	BX
	PUSH	CX
	PUSH	DX
	PUSH	SI
	PUSH	DI
	PUSH	DS
	PUSH	ES

	PUSH	DS
	PUSH	BX
	MOV	AX,40H
	MOV	DS,AX
	MOV	AX,DS:[4EH]
	MOV	WORD PTR CS:[VTBL],AX
	XOR	AX,AX
	MOV	AL,DS:[62H]
	SHL	AX,1
	MOV	BX,AX
	MOV	AX,DS:[BX+50H]
	POP	BX
	POP	DS
	MOV	BYTE PTR DS:[SI+8],AH
	MOV	BYTE PTR DS:[SI+0AH],AL

	PUSH	SI
	ADD	SI,4
	MOV	CX,4
	REP	MOVSW
	LODSW
	MOV	AL,AH
	STOSB
	POP	SI
	LES	DI,DWORD PTR CS:[VTBL]
	MOV	AX,DS:[SI+8]
	MOV	BX,WORD PTR CS:[VTBL+6]
	MUL	BX
	ADD	AX,DS:[SI+10]
	SHL	AX,1
	ADD	DI,AX
	SHL	BX,1
	MOV	DX,DS:[SI+6]
	MOV	CX,DS:[SI+4]
	LDS	SI,DS:[SI]
SPR2SCR2:
	PUSH	CX
	PUSH	DI
	MOV	CX,DX
SPR2SCR1:
	LODSW
	XCHG	AX,ES:[DI]
	MOV	DS:[SI-2],AX
	ADD	DI,2
	LOOP	SPR2SCR1
	POP	DI
	POP	CX
	ADD	DI,BX
	LOOP	SPR2SCR2
	POP	ES
	POP	DS
	POP	DI
	POP	SI
	POP	DX
	POP	CX
	POP	BX
	POP	AX
	RET
ENDP
